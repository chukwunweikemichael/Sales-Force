(()=>{function e(i){var s=n[i];if(void 0!==s)return s.exports;var a=n[i]={exports:{}};return t[i](a,a.exports,e),a.exports}var t={322:()=>{function e(t){"@babel/helpers - typeof";return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}(function(t){function n(){var e,t=!1;this.settings={appendHelpButton:!0,displayHelpButton:!0,isExternalPage:!0,devMode:!1,targetElement:document.body,elementForOnlineDisplay:void 0,elementForOfflineDisplay:void 0,defaultMinimizedText:"",disabledMinimizedText:"",defaultAssistiveText:"",loadingText:"Loading",showIcon:void 0,enabledFeatures:[],entryFeature:"FieldService",storageDomain:document.domain,language:void 0,linkAction:{feature:void 0,name:void 0,valid:!1},linkActionParameters:{},useCustomAuthentication:!1,allowGuestUsers:!1,requireSLDS:!1},this.auth={},this.validLinkActions={},this.isMasterAndHasSlaves=!1,Object.defineProperty(this.auth,"oauthToken",{get:function(){return e},set:function(t){this.validateHeaderValue(t)?(e=t,t?(this.setSessionData(g,t),this.checkAuthentication()):this.deleteSessionData(g)):this.error("\""+t+"\" is not a valid OAuth token.")}.bind(this)}),this.featureScripts={},this.storedEventHandlers={},this.messageHandlers={},this.storageKeys=[c,p,u,g],this.defaultSettings={},this.snippetSettingsFile={},this.eswFrame=void 0,this.availableFeatures=["script","session"],this.outboundMessagesAwaitingIframeLoad=[],this.pendingMessages={},this.iframeScriptsToLoad=[],this.domInitInProgress=!1,this.componentInitInProgress=!1,this.hasSessionDataLoaded=!1,this.isIframeReady=!1,this.isAuthenticationRequired=!1,this.loginPendingSerializedData=void 0,Object.defineProperty(this,"isButtonDisabled",{get:function(){return t},set:function(e){t=e,this.onButtonStatusChange()}.bind(this),configurable:!0}),this.setupMessageListener(),this.getLinkActionData()}var i="embeddedServiceHelpButton",s=[".salesforce.com",".force.com",".sfdc.net"],a="esw_storage_iframe",o="5.0",r=100,d="__snapinsLoginCallback",l="__snapinsLogoutCallback",g="ESW_OAUTH_TOKEN",c="ESW_BODY_SCROLL_POSITION",p="ESW_IS_MINIMIZED",u="ESW_MINIMIZED_TEXT";n.prototype.getLightningOutParamsObj=function(){var e={};return embedded_svc.config&&embedded_svc.config.additionalSettings&&embedded_svc.config.additionalSettings.labelsLanguage?e={guestUserLang:embedded_svc.config.additionalSettings.labelsLanguage}:embedded_svc.settings.language&&""!==embedded_svc.settings.language.trim()&&(e={guestUserLang:embedded_svc.settings.language}),e.eswConfigDeveloperName=embedded_svc.settings.eswConfigDevName,e},n.prototype.adjustCommunityStorageDomain=function(){this.isCommunityDomain(this.settings.storageDomain)&&this.settings.storageDomain===document.domain&&(this.settings.storageDomain=this.settings.storageDomain+"/"+window.location.pathname.split("/")[1])},n.prototype.loadLightningOutScripts=function(e){return"function"==typeof Promise?new Promise(function(t,n){var i,s;try{i=e&&e.baseCoreURL?e.baseCoreURL:embedded_svc.settings.baseCoreURL,window.$Lightning?t("Lightning Out is already loaded on this page."):embedded_svc.utils.isCommunityOrSite()?t("Communities context does not require Lightning Out to use Embedded Service."):i&&(s=document.createElement("script"),s.type="text/javascript",s.src=i+"/lightning/lightning.out.js",s.onload=function(){t("Lightning Out scripts loaded.")},document.getElementsByTagName("head")[0].appendChild(s))}catch(e){n(e)}}):void this.loadScriptFromDirectory("common","promisepolyfill",function(){return this.loadLightningOutScripts(e)}.bind(this),!0)},n.prototype.instantiateLightningOutApplication=function(e){return"function"==typeof Promise?new Promise(function(t,n){var i,s,a;try{i=e&&e.communityEndpointURL?e.communityEndpointURL:embedded_svc.settings.communityEndpointURL,s=e&&e.oauthToken?e.oauthToken:embedded_svc.settings.oauthToken,a=e&&e.paramsObj?e.paramsObj:embedded_svc.getLightningOutParamsObj()||void 0,embedded_svc.utils.isCommunityOrSite()?t("Communities context already has an Aura context."):window.$Lightning&&$Lightning.use("embeddedService:sidebarApp",function(){t("Lightning Out application request complete.")},i,s,a)}catch(e){n(e)}}):void this.loadScriptFromDirectory("common","promisepolyfill",function(){return this.instantiateLightningOutApplication(e)}.bind(this),!0)},n.prototype.createEmbeddedServiceComponent=function(e){return"function"==typeof Promise?new Promise(function(t,n){var i,s,a=e&&e.chatAPISettings?embedded_svc.validateStartChatAttributes(e.chatAPISettings):{};try{i=e&&e.attributes?e.attributes:{configurationData:embedded_svc.settings,chatAPISettings:a},s=e&&e.locator?e.locator:embedded_svc.settings.targetElement,embedded_svc.preparePageForSidebar(),window.$Lightning&&!document.querySelector(".embeddedServiceSidebar")?$Lightning.ready($Lightning.createComponent.bind(this,"embeddedService:sidebar",i,s,function(e,i,s){"SUCCESS"===i?embedded_svc.utils.addEventHandler("afterInitialization",function(){t("Embedded Service component created.")}):n(s)})):embedded_svc.utils.isCommunityOrSite()?window.dispatchEvent(new CustomEvent("embeddedServiceCreateSidebar",{detail:{componentAttributes:i,resolve:t,reject:n}})):"undefined"==typeof window.$Lightning?t("Lightning Out should be loaded on this page before creating the Embedded Service component."):t("Embedded Service component already exists.")}catch(e){n(e)}}):void this.loadScriptFromDirectory("common","promisepolyfill",function(){return this.createEmbeddedServiceComponent(e)}.bind(this),!0)},n.prototype.bootstrapEmbeddedService=function(e){return"function"==typeof Promise?new Promise(function(t,n){try{embedded_svc.loadLightningOutScripts(e).then(function(){embedded_svc.instantiateLightningOutApplication(e).then(function(){embedded_svc.createEmbeddedServiceComponent(e).then(function(){window.requestAnimationFrame(function(){embedded_svc.hideHelpButton(),t("Embedded Service application and component bootstrapped.")})})})})}catch(e){n(e)}}):void this.loadScriptFromDirectory("common","promisepolyfill",function(){return embedded_svc.bootstrapEmbeddedService(e)},!0)},n.prototype.validateStartChatAttributes=function(t){var n=t?t:{},i=n&&n.prepopulatedPrechatFields?n.prepopulatedPrechatFields:{},s=n&&n.extraPrechatInfo?n.extraPrechatInfo:[],a=n&&n.extraPrechatFormDetails?n.extraPrechatFormDetails:[],o=n&&n.fallbackRouting?n.fallbackRouting:[],r=n&&n.directToButtonRouting?n.directToButtonRouting:void 0,d={buttonId:n&&n.buttonId?n.buttonId:void 0,userId:n&&n.userId?n.userId:void 0,fallback:n&&"boolean"==typeof n.fallback?n.fallback:void 0};if("object"===e(i))n.prepopulatedPrechatFields=i;else throw new Error("Validation failed for prepopulatedPrechatFields, received: "+i);if(Array.isArray(a))n.extraPrechatFormDetails=a;else throw new Error("Validation failed for extraPrechatFormDetails, received: "+a);if(Array.isArray(s))n.extraPrechatInfo=s;else throw new Error("Validation failed for extraPrechatInfo, received: "+s);if(Array.isArray(o))n.fallbackRouting=o;else throw new Error("Validation failed for fallbackRouting, received: "+o);if("function"==typeof r?n.directToButtonRouting=r:embedded_svc.log("Did not receive an actionable parameter for directToButtonRouting, received: "+r),"object"!==e(d))throw new Error("Validation failed for directToAgentRouting, received: "+d);else if(n.directToAgentRouting=d,!d.buttonId)embedded_svc.log("Did not receive an actionable parameter for directToAgentRouting's buttonId, received: "+d.buttonId);else if("string"==typeof d.buttonId&&d.buttonId.trim().length)n.directToAgentRouting.buttonId=d.buttonId.trim(),n.directToAgentRouting.fallback=d.fallback,d.userId&&("string"==typeof d.userId&&d.userId.trim().length?n.directToAgentRouting.userId=d.userId.trim():embedded_svc.log("Did not receive an actionable parameter for directToAgentRouting's userId, received: "+d.userId));else throw new Error("Validation failed for directToAgentRouting's buttonId, received: "+d.buttonId);return n},n.prototype.isInternetExplorer=function(){return"ActiveXObject"in window},n.prototype.outputToConsole=function(e,t,n){(n||this.settings.devMode)&&console&&console[e]&&console[e]("[Snap-ins] "+(Array.isArray(t)?t.join(", "):t))},n.prototype.log=function(){this.outputToConsole("log",[].slice.apply(arguments))},n.prototype.error=function(e,t){e?this.outputToConsole("error",e,t):this.outputToConsole("error","esw responed with an unspecified error.",t),embedded_svc.utils.fireEvent("error")},n.prototype.warning=function(e,t){e?this.outputToConsole("warn","Warning: "+e,t):this.outputToConsole("warn","esw sent an anonymous warning.",t)},n.prototype.deprecated=function(e){this.warning(e+" is deprecated in version "+(+o).toFixed(1)+" and will be removed in version "+(+o+1).toFixed(1))},n.prototype.getCookie=function(e){var t,n,i=document.cookie;return i&&(t=i.indexOf(e+"="),-1!==t)?(t+=(e+"=").length,n=i.indexOf(";",t),-1===n&&(n=i.length),i.substring(t,n)):void 0},n.prototype.setCookie=function(e,t,n){var i,s=e+"="+t+";";n&&(i=new Date,i.setFullYear(i.getFullYear()+10),s+="expires="+i.toUTCString()+";"),s+="path=/;",document.cookie=s},n.prototype.mergeSettings=function(e){Object.keys(e).forEach(function(t){this.settings[t]===void 0&&(this.settings[t]=e[t])}.bind(this))},n.prototype.loadFeatureScript=function(e,t){var n=decodeURI(e).toLowerCase();-1===e.indexOf("..")?this.loadScriptFromDirectory("client",n+".esw",function(){this.featureScripts[e](this),this.availableFeatures.push(n),embedded_svc.utils.fireEvent("featureLoaded",void 0,e),t&&t(),this.processPendingMessages(n)}.bind(this)):this.error("\""+e+"\" is not a valid feature name.")},n.prototype.fireEvent=function(e,t){var n=[].slice.apply(arguments).slice(2);return window.embedded_svc&&embedded_svc.utils?embedded_svc.utils.fireEvent(e,t,n):(this.error("fireEvent should not be called before calling init!"),!0)},n.prototype.isValidEntityId=function(e){return"string"==typeof e&&(18===e.length||15===e.length)},n.prototype.getKeyPrefix=function(e){return this.isValidEntityId(e)?e.substr(0,3):void 0},n.prototype.isOrganizationId=function(e){return"00D"===this.getKeyPrefix(e)},n.prototype.getESWFrame=function(){var e=document.getElementById(a);return!this.eswFrame&&e&&(this.eswFrame=e.contentWindow),this.eswFrame},n.prototype.isFrameStorageEnabled=function(){return this.deprecated("isFrameStorageEnabled"),!0},n.prototype.processPendingMessages=function(e){this.pendingMessages[e]&&(this.pendingMessages[e].forEach(function(e){this.handleMessage(e.payload)}.bind(this)),this.pendingMessages[e]=void 0)},n.prototype.loadCSS=function(){var e=document.createElement("link"),t=this.settings.gslbBaseURL?this.settings.gslbBaseURL:this.settings.baseCoreURL;e.href=t+"/embeddedservice/"+this.settings.releaseVersion+"/esw"+(this.settings.devMode?"":".min")+".css",e.type="text/css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e)},n.prototype.appendHelpButton=function(e){var t=document.createElement("div"),n="";t.className=i,this.isLanguageRtl(this.settings.language)&&this.isDesktop()&&(n="dir=\"rtl\""),t.innerHTML="<div class=\"helpButton\""+n+"><button class=\"helpButtonEnabled uiButton\" href=\"javascript:void(0)\"><span class=\"embeddedServiceIcon\" aria-hidden=\"true\" data-icon=\"&#59648;\"></span><span class=\"helpButtonLabel\" id=\"helpButtonSpan\" aria-live=\"polite\" aria-atomic=\"true\"><span class=\"assistiveText\">"+(this.settings.defaultAssistiveText||"")+"</span><span class=\"message\"></span></span></button></div>",e||(t.style.display="none"),this.settings.targetElement.appendChild(t),this.setHelpButtonText(this.settings.defaultMinimizedText),"ontouchstart"in document.documentElement&&[].slice.apply(document.querySelectorAll(".embeddedServiceHelpButton .uiButton")).forEach(function(e){e.classList.add("no-hover")}),this.onButtonStatusChange()},n.prototype.appendIFrame=function(){var t=document.createElement("iframe"),e={};t.id=a,t.src=this.settings.iframeURL,t.style.display="none",t.title="Live Chat Metadata",t.onload=function(){var t=this.getESWFrame();this.isIframeReady=!0,this.outboundMessagesAwaitingIframeLoad.forEach(function(e){t.postMessage(e,this.settings.iframeURL)}.bind(this)),this.outboundMessagesAwaitingIframeLoad=[],this.iframeScriptsToLoad.forEach(function(e){this.loadStorageScript(e)}.bind(this)),e.deploymentId=this.settings.deploymentId,e.isSamePageNavigation=this.isSamePageNavigation(),e.isRefresh=1===window.performance.navigation.type,this.postMessage("session.updateStorage",e),this.iframeScriptsToLoad=[]}.bind(this),this.settings.targetElement.appendChild(t),window.addEventListener("beforeunload",function(n){var e="You might lose the active chat session if you close this tab. Are you sure?";if(this.isInternetExplorer()&&(t.src="about:blank"),this.isMasterAndHasSlaves)if(embedded_svc.utils.fireEvent("snapinsCloseSessionWarning"),this.settings.closeSessionWarning&&"function"==typeof this.settings.closeSessionWarning)this.settings.closeSessionWarning();else return(n||window.event).returnValue=e,e;this.settings.__synchronous_decrement_tab||this.postMessage("chasitor.decrementActiveChatSession",this.settings.deploymentId)}.bind(this),!1)},n.prototype.preparePageForSidebar=function(){var e={};document.getElementById("snapins_invite")&&embedded_svc.inviteAPI&&embedded_svc.inviteAPI.inviteButton.setOnlineState(!1),embedded_svc.utils.fireEvent("beforeCreate"),Object.keys(this.settings).forEach(function(t){e[t]=this.settings[t]}.bind(this)),this.mergeSettings(this.defaultSettings)},n.prototype.createLightningComponent=function(e){this.preparePageForSidebar(),this.createEmbeddedServiceComponent({attributes:{configurationData:this.settings,serializedSessionData:e},locator:this.settings.targetElement}).then(function(){this.hideHelpButton(),this.componentInitInProgress=!1,this.setHelpButtonText(this.settings.defaultMinimizedText),embedded_svc.utils.fireEvent("ready")}.bind(this))},n.prototype.loadLightningApp=function(e){var t,n;if(this.settings.isExternalPage&&"string"!=typeof this.settings.communityEndpointURL)throw new Error("communityEndpointURL String property not set");t=document.getElementsByClassName("helpButton")[0],t&&(n=t.getBoundingClientRect().width,0<n&&(t.style.width=n+"px")),this.setHelpButtonText(this.settings.loadingText,!1),this.instantiateLightningOutApplication({communityEndpointURL:this.settings.communityEndpointURL,oauthToken:this.auth.oauthToken}).then(this.createLightningComponent.bind(this,e))},n.prototype.initLightningOut=function(e){this.hasSessionDataLoaded&&("function"==typeof Promise?this.loadLightningOutScripts().then(this.loadLightningApp.bind(this,e)):this.loadScriptFromDirectory("common","promisepolyfill",function(){this.initLightningOut(e)}.bind(this),!0))},n.prototype.setHelpButtonText=function(e,t){var n,i,s=!(this.settings.showIcon!==void 0)||this.settings.showIcon,a=t===void 0?s:t,o=document.getElementById("helpButtonSpan");o&&(n=o.querySelector(".message"),n.innerHTML=e,i=o.parentElement.querySelector(".embeddedServiceIcon"),i&&(i.style.display=a?"inline-block":"none"))},n.prototype.prepareDOM=function(){this.domInitInProgress||(this.domInitInProgress=!0,this.appendIFrame())},n.prototype.addSessionHandlers=function(){this.addMessageHandler("session.onLoad",function(){this.postMessage("session.get",this.storageKeys)}.bind(this)),this.addMessageHandler("session.sessionData",function(e){this.resumeInitWithSessionData(e)}.bind(this)),this.addMessageHandler("session.deletedSessionData",function(e){-1<e.indexOf("CHASITOR_SERIALIZED_KEY")&&(this.loginPendingSerializedData=void 0)}.bind(this)),this.addMessageHandler("session.updateMaster",function(e){e&&(e.isMaster?sessionStorage.setItem(this.settings.storageDomain+"MASTER_DEPLOYMENT_ID",this.settings.deploymentId):sessionStorage.removeItem(this.settings.storageDomain+"MASTER_DEPLOYMENT_ID"),this.isMasterAndHasSlaves=1<e.activeChatSessions&&e.isMaster,embedded_svc&&embedded_svc.liveAgentAPI&&(embedded_svc.liveAgentAPI.browserSessionInfo=e))}.bind(this))},n.prototype.addMetaTag=function(e,t){var n=document.createElement("meta");n.name=e,n.content=t,document.head.appendChild(n)},n.prototype.init=function(e,t,n,i,s,a){if(this.settings.baseCoreURL=e,this.settings.communityEndpointURL=t,this.settings.gslbBaseURL=n?n:e,this.settings.orgId=i,this.settings.releaseVersion=o,this.settings.eswConfigDevName=s,this.mergeSettings(a||{}),this.adjustCommunityStorageDomain(),"string"!=typeof this.settings.baseCoreURL)throw new Error("Base core URL value must be a string.");if(!this.isOrganizationId(this.settings.orgId))throw new Error("Invalid OrganizationId Parameter Value: "+this.settings.orgId);embedded_svc.utils?this.finishInit():this.loadScriptFromDirectory("utils","common",this.finishInit.bind(this))},n.prototype.finishInit=function(){if(this.storedEventHandlers&&(Object.getOwnPropertyNames(this.storedEventHandlers).forEach(function(e){this.storedEventHandlers[e].forEach(function(t){embedded_svc.utils.addEventHandler(e,t)})}.bind(this)),this.storedEventHandlers={}),!embedded_svc.utils.fireEvent("validateInit",function(e){return-1!==e.indexOf(!1)},this.settings)){if(this.checkForNativeFunctionOverrides(),this.settings.appendHelpButton&&this.loadCSS(),!this.settings.targetElement)throw new Error("No targetElement specified");this.settings.iframeURL=this.settings.gslbBaseURL+"/embeddedservice/"+this.settings.releaseVersion+(this.settings.devMode?"/eswDev.html":"/esw.html")+"?parent="+document.location.href,this.addSessionHandlers(),this.loadFeatures(this.onFeatureScriptsLoaded.bind(this)),embedded_svc.utils.fireEvent("afterInit",void 0,this.settings)}},n.prototype.onFeatureScriptsLoaded=function(){"complete"===document.readyState?setTimeout(this.prepareDOM.bind(this),1):document.addEventListener?(document.addEventListener("DOMContentLoaded",this.prepareDOM.bind(this),!1),window.addEventListener("load",this.prepareDOM.bind(this),!1)):window.attachEvent?window.attachEvent("onload",this.prepareDOM.bind(this)):this.log("No available event model. Exiting.")},n.prototype.checkForNativeFunctionOverrides=function(){var e=[{name:"document",object:document,functions:["addEventListener","createAttribute","createComment","createDocumentFragment","createElementNS","createTextNode","createRange","getElementById","getElementsByTagName","getElementsByClassName","querySelector","querySelectorAll","removeEventListener"]},{name:"window",object:window,functions:["addEventListener","clearTimeout","dispatchEvent","open","removeEventListener","requestAnimationFrame","setInterval","setTimeout"]}];e.forEach(function(e){e.functions.forEach(function(t){t in e.object&&!this.isNativeFunction(e.object,t)&&this.warning("Embedded Service Chat may not function correctly with this native JS function modified: "+e.name+"."+t,!0)}.bind(this))}.bind(this))},n.prototype.isNativeFunction=function(e,t){return Function.prototype.toString.call(e[t]).match(/\[native code\]/)},n.prototype.onHelpButtonClick=function(){if(!this.componentInitInProgress&&!document.getElementsByClassName("embeddedServiceSidebar").length){this.componentInitInProgress=!0;try{embedded_svc.utils.isCommunityOrSite()&&0<Object.keys(embedded_svc.liveAgentAPI.inviteButton).length?window.dispatchEvent(new CustomEvent("onStartChatFromInvitation"),{detail:{bubbles:!0,composed:!1}}):(this.checkAuthentication(),embedded_svc.utils.fireEvent("onHelpButtonClick"))}catch(e){throw this.componentInitInProgress=!1,e}}},n.prototype.resumeInitWithSessionData=function(e){var t=embedded_svc.utils.fireEvent("sessionDataRetrieved",function(e){return-1!==e.indexOf(!0)},e),n=!1,i=!1;this.settings.linkAction.valid?n=!0:t?(this.log("Existing session found. Continuing with data: "+e),n=!0,i=!0,embedded_svc.menu&&embedded_svc.menu.hideTopContainer()):this.componentInitInProgress&&(n=!0),this.hasSessionDataLoaded=!0,e[g]&&(this.auth.oauthToken=e[g]),this.loginPendingSerializedData=i?e:void 0,n&&(this.componentInitInProgress=!0,this.checkAuthentication()),this.settings.appendHelpButton&&this.appendHelpButton(this.settings.displayHelpButton&&!t)},n.prototype.checkAuthentication=function(){this.isAuthenticationRequired&&!this.settings.allowGuestUsers?this.auth.oauthToken?(this.loginButtonPressed||this.componentInitInProgress)&&this.initLightningOut(this.loginPendingSerializedData):embedded_svc.utils.fireEvent("requireauth"):(this.loginButtonPressed||this.componentInitInProgress)&&this.initLightningOut(this.loginPendingSerializedData)},n.prototype.postMessage=function(e,t){var n={domain:this.settings.storageDomain,data:t,method:e},i=this.getESWFrame();i?i.postMessage(n,this.settings.iframeURL):this.outboundMessagesAwaitingIframeLoad.push(n)},n.prototype.setSessionData=function(t,n){var i;"object"===e(t)?i=t:(i={},i[t]=n),this.postMessage("session.set",i)},n.prototype.deleteSessionData=function(e){var t;t=Array.isArray(e)?e:[e],this.postMessage("session.delete",t)},n.prototype.defineFeature=function(e,t){this.featureScripts[e]=t},n.prototype.registerStorageKeys=function(e){"string"==typeof e?this.storageKeys.push(e):e.forEach(function(e){this.storageKeys.push(e)}.bind(this))},n.prototype.addMessageHandler=function(e,t){this.messageHandlers[e]||(this.messageHandlers[e]=[]),this.messageHandlers[e].push(t)},n.prototype.clearMessageHandlers=function(){Object.keys(this.messageHandlers).forEach(function(e){this.messageHandlers[e]=[]}.bind(this))},n.prototype.loadStorageScript=function(e){this.isIframeReady?this.postMessage("script.load",e):this.iframeScriptsToLoad.push(e)},n.prototype.loadScriptFromDirectory=function(e,t,n,i){var s=t.toLowerCase(),a=document.createElement("script"),o=this.settings.gslbBaseURL;a.type="text/javascript",a.src=[o,"embeddedservice",i?void 0:this.settings.releaseVersion,e,s+(this.settings.devMode?"":".min")+".js"].filter(function(e){return!!e}).join("/"),n&&(a.onload=n),document.body.appendChild(a)},n.prototype.loadFeatures=function(e){this.settings.enabledFeatures.forEach(function(t){"base"!==t&&-1===this.availableFeatures.indexOf(t.toLowerCase())&&this.loadFeatureScript(t,e)}.bind(this))},n.prototype.addEventHandler=function(e,t){window.embedded_svc&&embedded_svc.utils?embedded_svc.utils.addEventHandler(e,t):(!this.storedEventHandlers[e]&&(this.storedEventHandlers[e]=[]),this.storedEventHandlers[e].push(t))},n.prototype.setupMessageListener=function(){window.addEventListener("message",function(e){var t,n,i,s=e.data,a=e.origin.split(":")[1].replace("//","");s&&s.method&&embedded_svc.isMessageFromSalesforceDomain(a)&&("session.onLoad"===s.method&&-1===this.settings.iframeURL.indexOf(a)&&(n=this.settings.iframeURL.split("/")[2],i=e.origin.split("/")[2],this.settings.iframeURL=this.settings.iframeURL.replace(n,i)),t=s.method.split(".")[0].toLowerCase(),-1===this.availableFeatures.indexOf(t)?(!this.pendingMessages[t]&&(this.pendingMessages[t]=[]),this.pendingMessages[t].push({direction:"incoming",payload:s})):this.handleMessage(s))}.bind(this),!1)},n.prototype.handleMessage=function(e){var t=this.messageHandlers[e.method];t?t.forEach(function(t){t(e.data)}):this.log("Unregistered method "+e.method+" received.")},n.prototype.isMessageFromSalesforceDomain=function(e){var t;return!!(embedded_svc.utils.isCommunityOrSite()&&e===document.domain)||(t=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},s.some(function(n){return t(e,n)}))},n.prototype.isCommunityDomain=function(e){return".force.com"===e.substr(-10)},n.prototype.isSamePageNavigation=function(){var e,t,n=document.domain;return this.isCommunityDomain(document.domain)&&(t=n+"/"+window.location.pathname.split("/")[1],t===this.settings.storageDomain&&(n=t)),e=n.substr(-this.settings.storageDomain.length)===this.settings.storageDomain,e},n.prototype.addDefaultSetting=function(e,t){this.defaultSettings[e]=t},n.prototype.onButtonStatusChange=function(){var e,t=document.querySelector(".embeddedServiceHelpButton button");embedded_svc.menu&&embedded_svc.menu.onAgentAvailabilityChange(),t&&(e=t.querySelector(".message"),e&&(this.isButtonDisabled?(t.onclick=function(){},t.classList.remove("helpButtonEnabled"),t.classList.add("helpButtonDisabled"),e.innerHTML=this.settings.disabledMinimizedText):(t.onclick=this.onHelpButtonClick.bind(this),t.classList.remove("helpButtonDisabled"),t.classList.add("helpButtonEnabled"),e.innerHTML=this.settings.defaultMinimizedText)))},n.prototype.hideHelpButton=function(){var e=document.querySelector("."+i);e&&(e.style.display="none")},n.prototype.showHelpButton=function(){var e=document.querySelector("."+i);e&&(e.style.display="")},n.prototype.setDefaultButtonText=function(e,t,n,i){this.settings.entryFeature===e&&(this.settings.defaultMinimizedText=this.settings.defaultMinimizedText||t,this.settings.disabledMinimizedText=this.settings.disabledMinimizedText||n,this.settings.defaultAssistiveText=this.settings.defaultAssistiveText||i||"")},n.prototype.setDefaultShowIcon=function(e,t){this.settings.entryFeature===e&&this.settings.showIcon===void 0&&(this.settings.showIcon=t)},n.prototype.registerLinkAction=function(e,t){var n=this.settings.linkAction;this.validLinkActions[e]||(this.validLinkActions[e]=[]),-1===this.validLinkActions[e].indexOf(t)&&this.validLinkActions[e].push(t),n.feature&&n.name&&n.feature.toLowerCase()===e.toLowerCase()&&n.name.toLowerCase()===t.toLowerCase()&&(n.valid=!0,n.feature=e,this.settings.entryFeature=e)},n.prototype.setLinkAction=function(e,t,n){var i=Object.keys(this.validLinkActions).filter(function(t){return t.toLowerCase()===e.toLowerCase()})[0];i?(this.settings.linkAction.feature=i,this.settings.linkAction.name=this.validLinkActions[i].filter(function(e){return e.toLowerCase()===t.toLowerCase()})[0],this.settings.linkAction.valid=this.settings.linkAction.name!==void 0,this.settings.linkActionParameters=n):this.settings.linkAction.valid=!1},n.prototype.getLinkActionData=function(){window.location.search.replace(/([a-zA-Z0-9._]+)=([^&\s]+)/g,function(e,t,n){var i,s,a=t.toLowerCase();0===a.indexOf("snapins.")&&(s=a.replace("snapins.",""),"action"===s?(i=n.split("."),2===i.length&&(this.settings.linkAction.feature=i[0],this.settings.linkAction.name=i[1])):this.settings.linkActionParameters[s.toLowerCase()]=n)}.bind(this))},n.prototype.requireAuthentication=function(){var e=document.createElement("script"),t=document.createElement("style"),n=document.querySelector(this.settings.loginTargetQuerySelector);if(this.isAuthenticationRequired=!0,"https:"!==window.location.protocol&&!this.settings.devMode)throw this.settings.displayHelpButton=!1,new Error("Snap-in authentication requires HTTPS.");if(!this.settings.useCustomAuthentication){if(!this.settings.loginClientId||!this.settings.loginRedirectURL||!this.settings.loginTargetQuerySelector)throw new Error("Authentication in Snap-ins requires these valid settings params: loginClientId, loginRedirectURL, loginTargetQuerySelector.");if(n)this.loginButtonPressed=!1,n.addEventListener("click",function(){this.loginButtonPressed=!0}.bind(this));else throw new Error("loginTargetQuerySelector is not a valid DOM element.");this.addMetaTag("salesforce-community",this.settings.communityEndpointURL),this.addMetaTag("salesforce-client-id",this.settings.loginClientId),this.addMetaTag("salesforce-redirect-uri",this.settings.loginRedirectURL),this.addMetaTag("salesforce-mode","popup"),this.addMetaTag("salesforce-target",this.settings.loginTargetQuerySelector),this.addMetaTag("salesforce-login-handler",d),this.addMetaTag("salesforce-logout-handler",l),embedded_svc.utils.addEventHandler("requireauth",function(){var e=setInterval(function(){window.SFIDWidget&&(clearInterval(e),window.SFIDWidget.openid_response?window[d]():window.SFIDWidget.login())},r)}),embedded_svc.utils.addEventHandler("autherror",function(){var e;window.SFIDWidget&&(this.loginButtonPressed=!0,window.SFIDWidget.logout(),e=setInterval(function(){window.SFIDWidget.config&&(clearInterval(e),embedded_svc.utils.fireEvent("requireauth"))}.bind(this,e),r))}.bind(this)),window[d]=function(){var e=document.querySelector(this.settings.loginTargetQuerySelector),t=document.createElement("button");(this.loginButtonPressed||this.componentInitInProgress)&&(e.innerHTML=""),t.className="authenticationStart",t.innerHTML=this.settings.authenticationStartLabel,t.addEventListener("click",this.onHelpButtonClick.bind(this)),e.appendChild(t),this.auth.oauthToken=window.SFIDWidget.openid_response.access_token}.bind(this),window[l]=function(){this.auth.oauthToken=void 0,window.SFIDWidget.init()}.bind(this),document.head.appendChild(t),t.sheet.insertRule(".sfid-logout { display: none; }",0),e.type="text/javascript",e.src=this.settings.communityEndpointURL+"/servlet/servlet.loginwidgetcontroller?type=javascript_widget"+(embedded_svc.settings.devMode?"&min=false":""),document.head.appendChild(e)}},n.prototype.requireSLDS=function(){var e,t,n;this.settings.requireSLDS=!0,this.settings.targetElement===document.body&&(e=document.createElement("div"),e.id="esw-snapin-target",document.body.appendChild(e),this.settings.targetElement=e),this.settings.targetElement.classList.add("slds-scope"),t=document.createElement("link"),n=this.settings.gslbBaseURL?this.settings.gslbBaseURL:this.settings.baseCoreURL,t.href=n+"/embeddedservice/"+this.settings.releaseVersion+"/esw-slds"+(this.settings.devMode?"":".min")+".css",t.type="text/css",t.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(t)},n.prototype.validateHeaderValue=function(e){return /^[0-9a-zA-Z!#$%&'*+-.^_`|~" ]*$/g.test(e)},n.prototype.isLanguageRtl=function(e){if(e&&""!==e.trim())switch(e.substring(0,2)){case"ar":case"fa":case"he":case"iw":case"ji":case"ur":case"yi":return!0;default:return!1;}},n.prototype.isDesktop=function(){return-1===navigator.userAgent.indexOf("Mobi")},window.embedded_svc=new n,Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];"object"===n?(window.embedded_svc[e]={},Object.keys(n).forEach(function(t){window.embedded_svc[e][t]=n[t]})):window.embedded_svc[e]=n})})(window.embedded_svc||{})}},n={};(()=>{"use strict";function t(e){"@babel/helpers - typeof";return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){"@babel/helpers - typeof";return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function i(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?s(Object(t),!0).forEach(function(n){a(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(e,t,n){n=n||{};var i=new CustomEvent(t,{bubbles:!0,detail:n});e.dispatchEvent(i)},r=function(e){return e===void 0||null===e||"object"===t(e)&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length};var d=new Map([["gaClientId","clientId"],["gaPropId","trackingId"],["gaClickId","_gclid"]]),l=function(e){if("undefined"!=typeof ga&&"getAll"in ga)return ga.getAll().filter(function(t){return t.get("trackingId").includes(e)})[0]},g=function(){var e=l("UA-118367394-"),t={};return d.forEach(function(n,i){var s="";e&&(s=e.get(n)||""),t[i]=s}),t};var c=function(e,t,n,i,s){e.push({label:t,value:n,displayToAgent:i,transcriptFields:s})},p=function(e){return e?e:null},u=function(e){var t="";return e&&(e.sales&&(t+="|Sales:"+e.sales),e.service&&(t+="|Service:"+e.service),e.marketing&&(t+="|Mktg:"+e.marketing),e.platform&&(t+="|Plat:"+e.platform),0<t.length)?t.substring(1):null},m=function(e,t){var n="undefined"!=typeof Util&&Util.getCookie?Util.getCookie("appxud"):{};r(n)||(c(e,"Form - First name",p(n.f),!0,["First_Name__c"]),c(e,"Form - Last name",p(n.l),!0,["Last_Name__c"]),c(e,"Form - Email",p(n.e),!0,["Email__c"]),c(e,"Form - Phone number",p(n.p),!0,["Phone_Number__c"]),c(t,"Form - Job title",p(n.t),!0,["Job_Title__c"]),c(t,"Form - Company name",p(n.c),!0,["Company_Name__c"]),c(t,"Form - Product Interest",p(n.pi),!0,["Product_Interest__c"]),c(t,"Primary Product Interest",p(n.ppi),!0,["Primary_Product_Interest__c"]))},h=function(){"object"===("undefined"==typeof SfdcWwwBase?"undefined":n(SfdcWwwBase))&&SfdcWwwBase.demandBase&&SfdcWwwBase.demandBase.loaded&&SfdcWwwBase.demandBase.loaded.then(function(){var e=SfdcWwwBase.demandBase.data,t=[];e&&(c(t,"Demandbase Company Name",p(e.company_name),!0,["Demandbase_Company_Name__c"]),c(t,"Demandbase Employee count",p(e.employee_count),!0,["Employee_Count__c"]),c(t,"Demandbase Region name",p(e.region_name),!0,["Region_Name__c"]),c(t,"Demandbase City",p(e.city),!0,["Registry_City__c"]),c(t,"Demandbase Industry",p(e.industry),!0,["Industry__c"]),c(t,"Demandbase Audience",p(e.audience),!0,["Audience__c"]),c(t,"Demandbase Audience segment",p(e.audience_segment),!0,["Audience_Segment__c"]),c(t,"Demandbase Marketing alias",p(e.marketing_alias),!0,["Marketing_Alias__c"]),embedded_svc.settings.extraPrechatFormDetails=embedded_svc.settings.extraPrechatFormDetails.concat(t))})},y=function(e){"undefined"!=typeof digitalData&&(c(e,"PTC Score",u(digitalData.ptc),!0,["PTC_Scoring__c"]),digitalData.page&&(c(e,"Converting page",p(digitalData.page.convertingpage),!0,["Converting_Page__c"]),c(e,"Previous page",p(digitalData.page.prevpage),!0,["Previous_Page__c"]),c(e,"Page type",p(digitalData.page.type),!0,["Page_Type__c"]),c(e,"Page referrer",p(digitalData.page.referrer),!0,["Page_Referrer__c"])))},f=function(){var e=[],t=[];embedded_svc.settings.extraPrechatFormDetails||(embedded_svc.settings.extraPrechatFormDetails=[]);var i=location.origin+location.pathname;c(t,"Page URL",i.substring(0,255),!0,["Page_URL__c"]),"object"===("undefined"==typeof SfdcWwwBase?"undefined":n(SfdcWwwBase))&&SfdcWwwBase.gdpr&&SfdcWwwBase.gdpr.isActiveGroup("functional")&&(m(e,t),y(t),h()),embedded_svc.settings.extraPrechatFormDetails=embedded_svc.settings.extraPrechatFormDetails.concat(t,e),"undefined"!=typeof ga&&ga(function(){var e=g().gaClientId||"";embedded_svc.settings.extraPrechatFormDetails.push({label:"Google Client ID",value:e,displayToAgent:!1,transcriptFields:["GA_Client_ID__c"]})})};var b="chatInitKeys",v=function(){if("undefined"!=typeof window.digitalData){var e=window.digitalData.util,t=window.digitalData.localStorage;b in t||(t[b]=[],e.saveLocalStorage())}};v();var S=function(){return document.querySelector(".featureBody.embeddedServiceSidebarFeature")},L=function(e){var t=document.querySelector(e.selector);t&&t.addEventListener("click",function(){S()||I("chatView",e.label)})},E=function(){L({selector:".embeddedServiceHelpButton .helpButton button.uiButton",label:"chat-anchor"}),f()},I=function(e,t){o(document,"sfdc-"+e,t)},C=function(e,t,n){"onChatRequestSuccess"===e?!1===n&&A(t):"onChatTransferSuccessful"==e&&n&&A(t)},A=function(e){var t=e.liveAgentSessionKey,n=window.digitalData.util,i=window.digitalData.localStorage;i[b].includes(t)||(i[b].push(t),n.saveLocalStorage(),o(document,"sfdc-chatInitialize"))};var _=function(e,t){"perf"===e&&(e="qa");var n=t.toLowerCase().replace(/_/g,"-"),i=new Request("https://a.sfdcstatic.com/assets/".concat(e,"/livechat/").concat(n,".json"),{method:"GET"}),s=fetch(i).then(function(e){if(!e.ok){try{var n=document.createElement("script");n.type="module",n.innerHTML="import logging from 'https://www.salesforce.com/c/public/app/mjs/clientLogging.js'; (async () => {window.logging = logging; window.logging('".concat("Livechat config error","', ").concat(JSON.stringify({campaignId:"LcMPza4ZJ5",experienceId:"LcH1kNhdkQ",name:"LcEvent",type:"error",description:"Livechat configs were not able to be fetched"}),", '").concat("error","');})();"),document.body.appendChild(n)}catch(e){}return}return e.json()}).then(function(e){return e})["catch"](function(e){return e});return s};var D={prod:{en_us:{orgId:"00D000000000062",storeEndpoint:"https://sf.secure.force.com/saleschat",cdnEndpoint:"https://service.force.com",orgEndpoint:"https://org62.my.salesforce.com",snippetName:"Sales",baseLiveAgentContentURL:"https://c.la2-c1-ia4.salesforceliveagent.com/content",deploymentId:"57230000000DmsR",buttonId:"5733y000000MDKV",baseLiveAgentURL:"https://d.la2-c1-ia4.salesforceliveagent.com/chat",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I0M000000PAsDUAW_15f4f60cb08",settings:{displayHelpButton:!0,language:"en-US",defaultMinimizedText:"Let's chat",disabledMinimizedText:"Let's chat",wwwChatBotEnabled:!0,enabledFeatures:["LiveAgent"],entryFeature:"LiveAgent"},isOfflineSupportEnabled:!1,eswSrc:"https://org62.my.salesforce.com/embeddedservice/5.0/esw.min.js"},en_gb:{orgId:"00D000000000062",buttonId:"5733y000000fzvH",deploymentId:"572300000009XhK",storeEndpoint:"https://sf.secure.force.com/saleschat",cdnEndpoint:"https://service.force.com",orgEndpoint:"https://org62.my.salesforce.com",snippetName:"Snap_Ins_UK",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I0M000000KynTUAS_161b6220438",baseLiveAgentContentURL:"https://c.la2-c1-ia4.salesforceliveagent.com/content",baseLiveAgentURL:"https://d.la2-c1-ia4.salesforceliveagent.com/chat",eswSrc:"https://org62.my.salesforce.com/embeddedservice/5.0/esw.min.js",isOfflineSupportEnabled:!0,settings:{language:"en-US",wwwChatBotEnabled:!0,defaultMinimizedText:"Let's chat",disabledMinimizedText:"Let's chat",displayHelpButton:!0,enabledFeatures:["LiveAgent"],entryFeature:"LiveAgent"}}}};var T=function(e,t,n){if("prod"!==t)return e;var s=n.toLowerCase().replace(/-/g,"_"),a=D.prod[s];if(!e||0===Object.keys(e).length)return a;var o=i(i({},null===a||void 0===a?void 0:a.settings),null===e||void 0===e?void 0:e.settings),r=i(i({},a),e);return r.settings=o,r};var w=function(){var e=new Promise(function(e,t){var n,i=null!==(n=sfdcBase)&&void 0!==n&&n.locale?sfdcBase.locale.toLowerCase():"",s="undefined"!=typeof sfdcBase&&sfdcBase.env?sfdcBase.env.toLowerCase():"prod";if(!i)return void t();var a=_(s,i);a.then(function(t){var n=T(t,s,i);e(n)})["catch"](function(e){t(e)})});return e};e(322);var P=!1;(function(){w().then(function(n){if(r(n)||0===Object.keys(n).length){try{var i=document.createElement("script");i.type="module",i.innerHTML="import logging from 'https://www.salesforce.com/c/public/app/mjs/clientLogging.js'; (async () => {window.logging = logging; window.logging('".concat("Livechat config error","', ").concat(JSON.stringify({campaignId:"LcMPza4ZJ5",experienceId:"LcH1kNhdkQ",name:"LcEvent",type:"error",description:"Livechat configs were not able to be fetched"}),", '").concat("error","');})();"),document.body.appendChild(i)}catch(e){}return}if(!window.embedded_svc){var t=document.createElement("script");t.setAttribute("src",n.eswSrc),t.onload=function(){e(null,n)},document.body.appendChild(t)}else e(n.cdnEndpoint,n)})["catch"](function(){throw new Error("Unable to retrieve live chat configs")});var e=function(e,t){embedded_svc.settings.displayHelpButton=t.settings.displayHelpButton,embedded_svc.settings.language=t.settings.language,embedded_svc.settings.defaultMinimizedText=t.settings.defaultMinimizedText,embedded_svc.settings.disabledMinimizedText=t.settings.disabledMinimizedText,embedded_svc.settings.wwwChatBotEnabled=t.settings.wwwChatBotEnabled,embedded_svc.settings.enabledFeatures=t.settings.enabledFeatures,embedded_svc.settings.entryFeature=t.settings.entryFeature,embedded_svc.addEventHandler("onSettingsCallCompleted",function(){E()}),embedded_svc.addEventHandler("onChatEndedByAgent",function(){I("onChatEndedByAgent","agent")}),embedded_svc.addEventHandler("onChatEndedByChasitor",function(){I("onChatEndedByChasitor","visitor"),n(!0)}),embedded_svc.addEventHandler("afterDestroy",function(){I("afterDestroy","destroy_chat"),n(!0)}),embedded_svc.addEventHandler("onChatRequestSuccess",function(e){C("onChatRequestSuccess",e,embedded_svc.settings.wwwChatBotEnabled)}),embedded_svc.addEventHandler("onChatTransferSuccessful",function(e){C("onChatTransferSuccessful",e,embedded_svc.settings.wwwChatBotEnabled)});var n=function(e){var n=document.querySelector(".embeddedServiceHelpButton"),i=document.getElementById("offlineChatContainer");return i&&n?t.settings.wwwChatBotEnabled?void n.style.setProperty("display","block","important"):void(e?(n.style.setProperty("display","block","important"),i.style.display="none"):(n.style.display="none",i.style.display="block")):void 0};(function(){var e,i=document.getElementById("offlineChatButton");i.innerText=(null===(e=t.buttons)||void 0===e?void 0:e.contactText)||"Contact Us",i.href=t.contactForm||"https://www.salesforce.com/company/contact-us/",i.ariaLabel=i.innerText,Object.defineProperty(embedded_svc.settings,"agentAvailableOnButtonClick",{set:function(e){P=e,n(e)},get:function(){return P},enumerable:!0,configurable:!0})})(),embedded_svc.init(t.orgEndpoint,t.storeEndpoint,e,t.orgId,t.snippetName,{baseLiveAgentContentURL:t.baseLiveAgentContentURL,deploymentId:t.deploymentId,buttonId:t.buttonId,baseLiveAgentURL:t.baseLiveAgentURL,eswLiveAgentDevName:t.eswLiveAgentDevName,isOfflineSupportEnabled:t.isOfflineSupportEnabled})}})();(function(){var e=document.getElementById("acceptInvite"),t=document.getElementById("rejectInvite");e&&(e.onclick=function(){embedded_svc.inviteAPI.inviteButton.acceptInvite(),o(document,"sfdc-chatView","chat-invite")}),t&&(t.onclick=function(){embedded_svc.inviteAPI.inviteButton.rejectInvite();var e=document.querySelector(".embeddedServiceHelpButton .helpButton button.uiButton");e&&e.focus()}),document.addEventListener("keyup",function(e){27===e.keyCode&&embedded_svc.inviteAPI.inviteButton.rejectInvite()})})()})()})();